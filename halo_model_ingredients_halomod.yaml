name: halo_model_ingredients_halomod
version: Nov2024
purpose: "Calculates halo model ingredients: matter halo profile, halo mass function, halo bias"
url: ""
interface: halo_model_ingredients_halomod.py
attribution: [Andrej Dvornik, Marika Asgari, Maria-Cristina Fortuna]
rules:
    "If you use this module then please cite the papers below"
cite:
    - ""

assumptions:
    - ""

explanation: |
   Halo model calculations require setting the halo model ingredients. Here we use halomod and hmf python libraries
   to allow for a range of ingredients to be defined in a consistent way.  

   Note that the concentration-mass relations are calculated in colossus and they each have their own mass and redshift limits:
   https://bdiemer.bitbucket.io/colossus/halo_concentration.html

# List of parameters that can go in the params.ini file in the section for this module    
params:
        log_mass_min:
            meaning: "Minimum halo mass in log10(M_sun h^-1)."
            type: real
            default: 
        log_mass_max:
            meaning: "Maximum halo mass in log10(M_sun h^-1)."
            type: real
            default: 
        nmass:
            meaning: "Number of log10 binned halo masses."
            type: integer
            default: 
        zmin:
            meaning: "Minimum redshift used to calculate ingredients."
            type: real
            default: 
        zmax:
            meaning: "Maximum redshift used to calculate ingredients."
            type: real
            default: 
        nz:
            meaning: "Number of redshift bins."
            type: integer
            default: 
        profile:
            meaning: "type of profile, choose from: NFW, CoredNFW, Einasto, ... see full list:
            https://halomod.readthedocs.io/en/latest/_autosummary/halomod.profiles.html"
            type: str
            default: NFW
        nk:
            meaning: "Number of k-modes for fourier transform of the profile."
            type: integer
            default: 
        profile_value_name:
            meaning: "Section name in values.ini for profile inputs."
            type: str
            default: profile_parameters
        hmf_model:
            meaning: "Model name for halo mass function, choose from: "
            type: str
            default: 
        mdef_model:
            meaning: "Halo mass definition, choose from: "
            type: str
            default: 
        overdensity:
            meaning: "Over density threshold, only used if mdef_model!=SOVirial"
            type: str 
            default: 
        use_mead2020_corrections:
            meaning: "Choose from mead2020, mead2020_feedback and None. If not None sets the ingredients to match Mead+ 2021, HMCode2020 paper"
            type: str 
            default: None
        Roots_n_Norms_FolderName:
            meaning: "Folder name for Roots and Normalisations."
            type: str
            default: COSEBIS_DIR "/TLogsRootsAndNorms"
inputs:
    input_section_name:
        ell:
            meaning: "Sample ell values for input C_ell"
            type: real 1d
            default: 
        nbin_a:
            meaning: "Number of redshift bins in the first quantity."
            type: int
            default:
        nbin_b:
            meaning: "Number of redshift bins in the second quantity. If nbin_a is not equal nbin_b gives an error."
            type: int
            default:
        nbin:
            meaning: "Number of redshift bins used if nbin_a or b not found."
            type: int
            default:
        bin_i_j:
            meaning: "C_ell (no l(l+1) factor) for bin i and j."
            type: real 1d
            default:
outputs:
    output_section_name:
        n:
            type: "real 1d"
            meaning: "Array of mode values n for COSEBIs."
        bin_i_j:
            type: "real 1d"
            meaning: "Array of E_n or B_n, for bin i and j."
        theta_min:
            type: real 
            meaning: "Minimum angle in arcmin"
        theta_max:
            type: real
            meaning: "Maximum angle in arcmin"
        nbin_a:
            type: int
            meaning: "Number of redshift bins in the first quantity."
        nbin_b:
            type: int
            meaning: "Number of redshift bins in the second quantity. Currently nbin_a==nbin_b."




